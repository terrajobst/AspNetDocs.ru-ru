---
uid: mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6
title: Часть 6. Использование заметок к данным для проверки модели | Документация Майкрософт
author: jongalloway
description: В этой серии руководств подробно описаны все шаги, предпринятые для создания примера приложения музыкального хранилища ASP.NET MVC. Часть 6 охватывает использование заметок к данным для модели V...
ms.author: riande
ms.date: 04/21/2011
ms.assetid: b3193d33-2d0b-4d98-9712-58bd897c62ec
msc.legacyurl: /mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6
msc.type: authoredcontent
ms.openlocfilehash: bc031dd5be61cc6707c522f85f6af77a420c8b31
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78433536"
---
# <a name="part-6-using-data-annotations-for-model-validation"></a>Часть 6. Использование заметок к данным для проверки модели

[Джон Гэллоуэй](https://github.com/jongalloway)

> Музыкальное хранилище MVC — это учебное приложение, в котором представлены и объясняются пошаговые инструкции по использованию ASP.NET MVC и Visual Studio для разработки веб-приложений.  
>   
> Музыкальное хранилище MVC — это упрощенная реализация в магазине, которая продает музыкальные альбомы в сети и реализует базовое администрирование сайта, вход пользователя в систему и функции корзины покупок.  
>   
> В этой серии руководств подробно описаны все шаги, предпринятые для создания примера приложения музыкального хранилища ASP.NET MVC. Часть 6 охватывает использование заметок к данным для проверки модели.

У нас возникли серьезные проблемы с формами создания и редактирования: они не выполняют проверку. Мы можем выполнить такие действия, как оставить обязательные поля пустыми или ввести буквы в поле Price, и первая ошибка, которую мы будем видеть, — из базы данных.

Можно легко добавить проверку в наше приложение, добавив заметки к данным в наши классы модели. Заметки к данным позволяют описать правила, которые мы хотим применить к нашим свойствам модели, и ASP.NET MVC обеспечит их применение и отображение соответствующих сообщений для наших пользователей.

## <a name="adding-validation-to-our-album-forms"></a>Добавление проверки в формы альбома

Мы будем использовать следующие атрибуты аннотации данных:

- **Обязательное** — указывает, что свойство является обязательным полем.
- **DisplayName** — определяет текст, который нужно использовать в полях формы и сообщениях проверки.
- **StringLength** — определяет максимальную длину для строкового поля
- **Range** — задает максимальное и минимальное значение для числового поля.
- **BIND** — перечисляет поля, которые следует исключить или включить при привязке значений параметров или форм к свойствам модели.
- **Скаффолдколумн** — позволяет скрывать поля из форм редактора

*Примечание. Дополнительные сведения о проверке модели с помощью атрибутов заметки к данным см. в документации MSDN по адресу* [`https://go.microsoft.com/fwlink/?LinkId=159063`](https://go.microsoft.com/fwlink/?LinkId=159063)

Откройте класс альбома и добавьте в начало следующие операторы *using* .

[!code-csharp[Main](mvc-music-store-part-6/samples/sample1.cs)]

Затем обновите свойства, чтобы добавить атрибуты отображения и проверки, как показано ниже.

[!code-csharp[Main](mvc-music-store-part-6/samples/sample2.cs)]

Мы также изменили жанр и исполнитель на виртуальные свойства. Это позволяет Entity Framework с отложенной загрузкой при необходимости.

[!code-csharp[Main](mvc-music-store-part-6/samples/sample3.cs)]

После добавления этих атрибутов в модель альбома на экране создания и редактирования сразу же начинается проверка полей и использование отображаемых имен (например, URL-адрес обложки альбома вместо Албумартурл). Запустите приложение и перейдите по/Стореманажер/креате.

![](mvc-music-store-part-6/_static/image1.png)

Далее мы будем разбивать некоторые правила проверки. Введите цену 0 и оставьте поле заголовок пустым. При нажатии кнопки "создать" отобразится форма с сообщениями об ошибках проверки, показывающими, какие поля не соответствуют определенным Вами правилам проверки.

![](mvc-music-store-part-6/_static/image2.png)

## <a name="testing-the-client-side-validation"></a>Тестирование проверки на стороне клиента

Проверка на стороне сервера очень важна с точки зрения приложения, так как пользователи могут обойти проверку на стороне клиента. Однако формы веб-страниц, реализующие проверку на стороне сервера, представляют три существенных проблемы.

1. Пользователь должен подождать, пока форма будет отправлена, проверена на сервере и отправить ответ в браузер.
2. Пользователь не получает мгновенной отзыв об исправлении поля, чтобы оно передавало правила проверки.
3. Мы тратим ресурсы сервера на выполнение логики проверки вместо использования браузера пользователя.

К счастью, шаблоны шаблонов ASP.NET MVC 3 имеют встроенную проверку на стороне клиента, что не требует дополнительной работы.

Ввод одной буквы в поле Title удовлетворяет требованиям проверки, поэтому сообщение проверки немедленно удаляется.

![](mvc-music-store-part-6/_static/image3.png)

> [!div class="step-by-step"]
> [Назад](mvc-music-store-part-5.md)
> [Вперед](mvc-music-store-part-7.md)
